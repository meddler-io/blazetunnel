!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-highlightjs",["exports","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],t):t((e=e||self)["ngx-highlightjs"]={},e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,r,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function a(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var p=new t.InjectionToken("HIGHLIGHT_OPTIONS"),c=function(){function e(e,t,n){var a=this;this._options=n,this._ready=new r.BehaviorSubject(null),this.ready=this._ready.asObservable().pipe(i.filter((function(e){return!!e})),i.take(1)),o.isPlatformBrowser(t)&&e.defaultView.hljs?this._ready.next(e.defaultView.hljs):this._loadLibrary().pipe(i.switchMap((function(t){return a._options&&a._options.lineNumbers?(e.defaultView.hljs=t,h(import("highlightjs-line-numbers.js")).pipe(i.tap((function(){return a._ready.next(t)})))):(a._ready.next(t),r.EMPTY)})),i.catchError((function(e){return console.error("Unable to load hljs library",e),r.EMPTY}))).subscribe()}return e.prototype._loadLibrary=function(){var e=this;return this._options&&this._options.languages&&Object.keys(this._options.languages).length?r.from(h(import("highlight.js/lib/highlight"))).pipe(i.switchMap((function(t){return e._loadLanguages(t)}))):r.from(h(import("highlight.js")))},e.prototype._loadLanguages=function(e){var t=Object.entries(this._options.languages).map((function(t){var n=l(t,2),r=n[0],o=n[1];return h(o()).pipe(i.tap((function(t){return e.registerLanguage(r,t)})))}));return r.zip.apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(t)).pipe(i.map((function(){return e})))},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[o.DOCUMENT]}]},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](o.DOCUMENT),t["ɵɵinject"](t.PLATFORM_ID),t["ɵɵinject"](p,8))},token:e,providedIn:"root"}),e=a([t.Injectable({providedIn:"root"}),u(0,t.Inject(o.DOCUMENT)),u(1,t.Inject(t.PLATFORM_ID)),u(2,t.Optional()),u(2,t.Inject(p)),s("design:paramtypes",[Object,Object,Object])],e)}();var h=function(e){return r.from(e).pipe(i.filter((function(e){return!!e&&!!e.default})),i.map((function(e){return e.default})))},g=h,f=function(){function e(e,t){var n=this;this._loader=e,e.ready.pipe().subscribe((function(e){n._hljs=e,t&&t.config&&(e.configure(t.config),e.listLanguages().length<1&&console.error("[HighlightJS]: No languages were registered!"))}))}return Object.defineProperty(e.prototype,"hljs",{get:function(){return this._hljs},enumerable:!0,configurable:!0}),e.prototype.highlight=function(e,t,n,r){return this._loader.ready.pipe(i.map((function(i){return i.highlight(e,t,n,r)})))},e.prototype.highlightAuto=function(e,t){return this._loader.ready.pipe(i.map((function(n){return n.highlightAuto(e,t)})))},e.prototype.fixMarkup=function(e){return this._loader.ready.pipe(i.map((function(t){return t.fixMarkup(e)})))},e.prototype.highlightBlock=function(e){return this._loader.ready.pipe(i.map((function(t){return t.highlightBlock(e)})))},e.prototype.configure=function(e){return this._loader.ready.pipe(i.map((function(t){return t.configure(e)})))},e.prototype.initHighlighting=function(){return this._loader.ready.pipe(i.map((function(e){return e.initHighlighting()})))},e.prototype.registerLanguage=function(e,t){return this._loader.ready.pipe(i.tap((function(n){return n.registerLanguage(e,t)})))},e.prototype.listLanguages=function(){return this._loader.ready.pipe(i.map((function(e){return e.listLanguages()})))},e.prototype.getLanguage=function(e){return this._loader.ready.pipe(i.map((function(t){return t.getLanguage(e)})))},e.prototype.lineNumbersBlock=function(e){return this._loader.ready.pipe(i.filter((function(e){return!!e.lineNumbersBlock})),i.tap((function(t){return t.lineNumbersBlock(e)})))},e.ctorParameters=function(){return[{type:c},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](c),t["ɵɵinject"](p,8))},token:e,providedIn:"root"}),e=a([t.Injectable({providedIn:"root"}),u(1,t.Optional()),u(1,t.Inject(p)),s("design:paramtypes",[c,Object])],e)}(),d=function(){function e(e,n,r,i){this._hljs=n,this._sanitizer=r,this._options=i,this.highlighted=new t.EventEmitter,this._nativeElement=e.nativeElement}return e.prototype.ngOnChanges=function(e){e.code&&e.code.currentValue&&e.code.currentValue!==e.code.previousValue&&this.highlightElement(this.code,this.languages)},e.prototype.highlightElement=function(e,t){var n=this;this.setTextContent(e),this._hljs.highlightAuto(e,t).subscribe((function(e){n.setInnerHTML(e.value),n.lineNumbers&&n._options&&n._options.lineNumbers&&n.addLineNumbers(),n.highlighted.emit(e)}))},e.prototype.addLineNumbers=function(){var e=this;this.destroyLineNumbersObserver(),r.animationFrameScheduler.schedule((function(){e._hljs.lineNumbersBlock(e._nativeElement).subscribe(),e._lineNumbersObs=new MutationObserver((function(){e._nativeElement.firstElementChild&&"TABLE"===e._nativeElement.firstElementChild.tagName.toUpperCase()&&e._nativeElement.classList.add("hljs-line-numbers"),e.destroyLineNumbersObserver()})),e._lineNumbersObs.observe(e._nativeElement,{childList:!0})}))},e.prototype.destroyLineNumbersObserver=function(){this._lineNumbersObs&&(this._lineNumbersObs.disconnect(),this._lineNumbersObs=null)},e.prototype.setTextContent=function(e){var t=this;r.animationFrameScheduler.schedule((function(){return t._nativeElement.textContent=e}))},e.prototype.setInnerHTML=function(e){var n=this;r.animationFrameScheduler.schedule((function(){return n._nativeElement.innerHTML=n._sanitizer.sanitize(t.SecurityContext.HTML,e)}))},e.ctorParameters=function(){return[{type:t.ElementRef},{type:f},{type:n.DomSanitizer},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]}]},a([t.Input("highlight"),s("design:type",String)],e.prototype,"code",void 0),a([t.Input(),s("design:type",Array)],e.prototype,"languages",void 0),a([t.Input(),s("design:type",Boolean)],e.prototype,"lineNumbers",void 0),a([t.Output(),s("design:type",Object)],e.prototype,"highlighted",void 0),e=a([t.Directive({host:{"[class.hljs]":"true"},selector:"[highlight]"}),u(3,t.Optional()),u(3,t.Inject(p)),s("design:paramtypes",[t.ElementRef,f,n.DomSanitizer,Object])],e)}(),y=function(){function e(){}return e=a([t.NgModule({declarations:[d],exports:[d]})],e)}();e.HIGHLIGHT_OPTIONS=p,e.Highlight=d,e.HighlightJS=f,e.HighlightLoader=c,e.HighlightModule=y,e.ɵ0=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-highlightjs.umd.min.js.map